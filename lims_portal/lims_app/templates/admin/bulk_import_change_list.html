{% extends "admin/change_list.html" %}

{% block content_title %}
  <h1 style="color: var(--text-primary, #202124); font-size: 24px; font-weight: 400; margin: 0 0 24px 0; line-height: 1.333;">{{ opts.verbose_name_plural|capfirst }} - Import CSV</h1>
{% endblock %}

{% block search %}
  {# Hide the search bar for import view #}
{% endblock %}

{% block result_list %}
  <div style="padding: 24px; background: var(--surface-color, #f8f9fa); border: 1px solid var(--border-color, #e8eaed); border-radius: 12px; box-shadow: 0 1px 3px rgba(60, 64, 67, 0.08); margin-bottom: 20px;">
    <h2 style="color: var(--text-primary, #202124); font-size: 20px; font-weight: 400; margin: 0 0 8px 0; line-height: 1.5;">Bulk Import Students</h2>
    <p style="color: var(--text-secondary, #5f6368); font-size: 14px; margin: 0 0 24px 0; line-height: 1.5;">Upload a CSV file to import multiple students at once.</p>

    {% url 'admin:lims_app_' as base_url %}{% url 'admin:index' as admin_index %}

    <form method="post" enctype="multipart/form-data" style="margin: 24px 0;">
      {% csrf_token %}
      <div style="margin-bottom: 20px;">
        <label for="csv_file" style="display: block; margin-bottom: 8px; color: var(--text-primary, #202124); font-size: 14px; font-weight: 500; line-height: 1.5;">Select CSV File:</label>
        <input type="file" id="csv_file" name="csv_file" accept=".csv" required style="width: 100%; padding: 12px 16px; border: 1px solid var(--border-color, #dadce0); border-radius: 8px; font-size: 14px; background: var(--surface-color, #fff); color: var(--text-primary, #202124); transition: border-color 0.2s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);">
      </div>
      <div style="display: flex; gap: 12px; align-items: center;">
        <button type="submit" style="display: inline-flex; align-items: center; padding: 8px 16px; background: var(--primary-color, #1a73e8); color: #fff; border: none; border-radius: 6px; font-size: 14px; font-weight: 500; cursor: pointer; transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1); min-height: 36px; box-shadow: 0 1px 3px rgba(60, 64, 67, 0.3);">Upload CSV</button>
        <a href="?download-template" style="display: inline-flex; align-items: center; padding: 8px 16px; background: var(--success-color, #34a853); color: #fff; text-decoration: none; border-radius: 6px; font-size: 14px; font-weight: 500; transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1); min-height: 36px; box-shadow: 0 1px 3px rgba(60, 64, 67, 0.3);">Download Template</a>
      </div>
    </form>

    <div style="background: var(--card-surface, #fff); padding: 20px; border: 1px solid var(--border-color, #e8eaed); border-radius: 12px; box-shadow: 0 1px 3px rgba(60, 64, 67, 0.08);">
      <h3 style="color: var(--text-primary, #202124); font-size: 16px; font-weight: 500; margin: 0 0 16px 0; line-height: 1.5;">CSV Format</h3>
      <p style="color: var(--text-primary, #202124); font-size: 14px; font-weight: 500; margin: 0 0 12px 0; line-height: 1.5;">Required columns:</p>
      <ul style="color: var(--text-secondary, #5f6368); font-size: 14px; margin: 0 0 20px 0; padding-left: 20px; line-height: 1.5;">
        <li><code style="background: var(--code-bg, #f1f3f4); color: var(--code-text, #202124); padding: 2px 4px; border-radius: 3px; font-family: 'Roboto Mono', monospace; font-size: 13px;">name</code> - Student's full name</li>
        <li><code style="background: var(--code-bg, #f1f3f4); color: var(--code-text, #202124); padding: 2px 4px; border-radius: 3px; font-family: 'Roboto Mono', monospace; font-size: 13px;">school_id</code> - Student's school ID (must be unique)</li>
        <li><code style="background: var(--code-bg, #f1f3f4); color: var(--code-text, #202124); padding: 2px 4px; border-radius: 3px; font-family: 'Roboto Mono', monospace; font-size: 13px;">email</code> - Student's email address</li>
        <li><code style="background: var(--code-bg, #f1f3f4); color: var(--code-text, #202124); padding: 2px 4px; border-radius: 3px; font-family: 'Roboto Mono', monospace; font-size: 13px;">gender</code> - Male, Female, or Other</li>
      </ul>
      <p style="color: var(--text-primary, #202124); font-size: 14px; font-weight: 500; margin: 0 0 12px 0; line-height: 1.5;">Example:</p>
      <pre style="background: var(--code-bg, #f1f3f4); color: var(--code-text, #202124); padding: 16px; border-radius: 8px; font-family: 'Roboto Mono', monospace; font-size: 13px; line-height: 1.5; overflow-x: auto; border: 1px solid var(--border-color, #e8eaed);">name,school_id,email,gender
John Doe,S12345,john@example.com,Male
Jane Smith,S12346,jane@example.com,Female</pre>
    </div>
  </div>

  {{ block.super }}
{% endblock %}

<style>
  :root {
    --surface-color: #f8f9fa;
    --card-surface: #fff;
    --border-color: #e8eaed;
    --text-primary: #202124;
    --text-secondary: #5f6368;
    --primary-color: #1a73e8;
    --success-color: #34a853;
    --code-bg: #f1f3f4;
    --code-text: #202124;
  }

  @media (prefers-color-scheme: dark) {
    :root {
      --surface-color: #1f1f1f;
      --card-surface: #292a2d;
      --border-color: #3c4043;
      --text-primary: #e8eaed;
      --text-secondary: #9aa0a6;
      --primary-color: #8ab4f8;
      --success-color: #81c995;
      --code-bg: #2d2e30;
      --code-text: #e8eaed;
    }
  }

  input[type="file"]:focus {
    outline: none;
    border-color: var(--primary-color, #1a73e8);
    box-shadow: 0 0 0 2px rgba(26, 115, 232, 0.2);
  }

  button:hover, a:hover {
    box-shadow: 0 2px 6px rgba(60, 64, 67, 0.4) !important;
    transform: translateY(-1px);
  }

  pre {
    margin: 0;
  }
</style>
